# Nosskey SDK サンプルアプリケーション TODO

## TODO

### 最高優先度（SDK関連・クリティカルな問題）
（現在該当項目なし）

### 高優先度（重要なUX改善とセキュリティ）
- [ ] 認証画面のカードデザインへの統一

### 中優先度（基本機能強化）
- [ ] 他のユーザをフォローする機能
- [ ] 複数アカウント対応
- [ ] リレーへのPWKバックアップ機能
- [ ] 画面遷移時にスクロールトップに移動させる
- [ ] ユーザのアイコン画像をカードに表示
- [ ] ノートのパース
- [ ] ローカルストレージ削除時にログアウト
- [ ] リレーの表示は設定に移動させる
- [ ] アカウント画面の表示をリッチにする
- [ ] プロフィールの表示と編集を分離する
- [ ] TLの表示もマシにする
- [ ] ボタンの色などを改善
- [ ] アプリ設定とコアなアカウント設定を分けたい
- [ ] より詳細な攻撃ベクトルの検討とリスク評価
- [ ] テストの充実
- [ ] iframeでアプリに埋め込んで同一ドメインのアカウントをクロスアプリで使用できる機能

### 低優先度（機能拡張・検証）
- [ ] パスキー作成が必要なケースの案内を追加する。
- [ ] 秘密鍵紛失時の回復方法についての説明を追加する。
- [ ] Windows（Edge）での動作をテストする。
- [ ] Windowsについて注意書きを追加する
- [ ] 動画によるチュートリアル

## アーカイブ（完了済み）

### 最高優先度（SDK関連・クリティカルな問題）
- [x] シークレットキーのキャッシュ問題を修正する。（TTL期間内でも毎回認証が必要になっている問題）
- [x] SDK起因のバグを修正する。（キャッシュなど）
- [x] SDKのインターフェースを再検討する。（pwkとprf directの統一性、公開鍵の保持など）
- [x] PWKManagerをシングルトンにする（キャッシュ設定に一貫性を持たせるため）
- [x] 秘密鍵インポート機能の動作を確認する。
- [x] デフォルトのリレーが初期設定されていない問題を修正する。
- [x] SDKにPWK保存機能をつける(optionに追加してデフォルト有効にする。NIP-07に合わせてsignEvent, getPublicKeyメソッドを追加。拡張性のためgetCurrentPWKメソッドも追加。PWKを使っているメソッドにPWKなしでも使えるようにしておくPWKがなかったらエラー)

### 高優先度（重要なUX改善とセキュリティ）
- [x] インポート→戻るを押すとホワイトアウトする問題を修正する。
- [x] `authenticated`変数を`isLoggedIn`など意味がより明確な変数名に変更する。
- [x] `nosskey_credential_ids`の保管と表示をやめる。
- [x] 認証関係（登録、ログイン）のユースケースと動線をわかりやすく改善する。
- [x] 既存のパスキーで作成済みPRFダイレクトアカウントにPWKなしでログインする動線を追加する。
- [x] 認証画面の情報の整理

### 中優先度（基本機能強化）
- [x] デモアプリとドメイン変更に関する注意喚起の説明文を追加する。
- [x] i18n対応の漏れを修正する。
- [x] ログアウトレベルを段階化する。（軽量/標準/完全の3段階）
- [x] ログアウト時にシークレットのキャッシュを削除する
- [x] プロフィール表示の問題を修正する。
- [x] npubとnsecのフォーマットで表示・コピー・インポート機能を実装する。
- [x] 未認証状態でもタイムライン表示を可能にする。（デフォルトのTL、パブキーに対するTL）
- [x] インポート鍵PWK喪失状態からの再ログイン（復元）機能。設定画面からのPWKのエクスポート機能。

### 低優先度（機能拡張・検証）
- [x] フォローの投稿をタイムラインに表示する機能を実装する。
- [x] Vitestを使用したテストを実装する。（単体・統合テスト）
- [x] Utils系の関数にテストを追加
- [x] アプリケーション情報にcommit hashを追加
- [x] ビットワーデンの対応可否を確認する。
- [x] Setting画面が肥大化しているのでセクションごとにコンポーネントに切り出す
