# Nosskey SDK サンプルアプリケーション設計書

## 1. 概要

このドキュメントは、Nosskey SDKを利用したサンプルアプリケーションの設計と実装詳細を記述しています。このアプリケーションは、Passkey（WebAuthn）を利用したNostr鍵ラップの仕組みをデモンストレーションするために作成されました。

## 2. アプリケーション構成

### 2.1 技術スタック

- **フロントエンド**: Svelte
- **構成**: SPA
- **ビルドツール**: Vite
- **Nostr関連**: rx-nostr（現在はモック実装）
- **スタイリング**: カスタムCSS

### 2.2 プロジェクト構造

TBD

## 3. コンポーネント詳細

### 3.1 状態管理（nosskey-store.js）

TBD

### 3.2 ページコンポーネント

#### 3.2.1 ホームページ

- Passkey対応確認機能
- `Nosskey.isPasskeySupported()`を使用してブラウザの対応状況を確認
- 対応状況に応じた表示と次のステップへの案内

#### 3.2.2 登録ページ

- ユーザーID入力フォーム
- Passkey登録処理
- `nosskey.registerPasskey()`を使用したWebAuthn登録フロー
- 登録結果の表示と次のステップへの案内

#### 3.2.3 ログインページ

- ユーザーID入力フォーム
- Passkey認証と鍵アンラップ処理
- 導出された公開鍵の表示と次のステップへの案内

#### 3.2.4 Nostrページ

- ユーザー情報表示（ID・公開鍵）
- メッセージ入力・送信機能
- 認証状態チェックとリダイレクト処理
- Nostrイベント作成と送信処理

```
 // リレーリスト
const relays = ['wss://relay.damus.io', 'wss://relay.snort.social', 'wss://nos.lol'];
```

### 3.3 共通レイアウト

- ヘッダー（タイトルとナビゲーション）
- メインコンテンツエリア
- フッター

## 4. データフロー

TBD

## 5. 技術的考慮事項

### 5.1 WebAuthn/Passkey対応

- `localhost`または`HTTPS`環境での実行が必要

### 5.2 状態管理

- Svelteのreactiveストアを使用
- アプリケーション全体での状態共有

## 6. 開発・実行方法

TBD